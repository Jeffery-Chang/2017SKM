/**
 * jQuery Roundabout - v2.4.2
 * http://fredhq.com/projects/roundabout
 *
 * Moves list-items of enabled ordered and unordered lists long
 * a chosen path. Includes the default "lazySusan" path, that
 * moves items long a spinning turntable.
 *
 * Terms of Use // jQuery Roundabout
 *
 * Open source under the BSD license
 *
 * Copyright (c) 2011-2012, Fred LeBlanc
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *   - Redistributions in binary form must reproduce the above
 *     copyright notice, this list of conditions and the following
 *     disclaimer in the documentation and/or other materials provided
 *     with the distribution.
 *   - Neither the name of the author nor the names of its contributors
 *     may be used to endorse or promote products derived from this
 *     software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */
(function(b){"use strict";var c,d,f;b.extend({roundaboutShapes:{def:"lazySusan",lazySusan:function(g,h,k){return{x:Math.sin(g+h),y:Math.sin(g+3*Math.PI/2+h)/8*k,z:(Math.cos(g+h)+1)/2,scale:Math.sin(g+Math.PI/2+h)/2+0.5}}}}),c={bearing:0,tilt:0,minZ:100,maxZ:280,minOpacity:0.4,maxOpacity:1,minScale:0.4,maxScale:1,duration:600,btnNext:null,btnNextCallback:function(){},btnPrev:null,btnPrevCallback:function(){},btnToggleAutoplay:null,btnStartAutoplay:null,btnStopAutoplay:null,easing:"swing",clickToFocus:!0,clickToFocusCallback:function(){},focusBearing:0,shape:"lazySusan",debug:!1,childSelector:"li",startingChild:null,reflect:!1,floatComparisonThreshold:1e-3,autoplay:!1,autoplayDuration:1e3,autoplayPauseOnHover:!1,autoplayCallback:function(){},autoplayInitialDelay:0,enableDrag:!1,dropDuration:600,dropEasing:"swing",dropAnimateTo:"nearest",dropCallback:function(){},dragAxis:"x",dragFactor:4,triggerFocusEvents:!0,triggerBlurEvents:!0,responsive:!1},d={autoplayInterval:null,autoplayIsRunning:!1,autoplayStartTimeout:null,animating:!1,childInFocus:-1,touchMoveStartPosition:null,stopAnimation:!1,lastAnimationStep:!1},f={init:function(g,h,k){var l,m=new Date().getTime();return g="object"==typeof g?g:{},h=b.isFunction(h)?h:function(){},h=b.isFunction(g)?g:h,l=b.extend({},c,g,d),this.each(function(){var n=b(this),o=n.children(l.childSelector).length,p=360/o,q=l.startingChild&&l.startingChild>o-1?o-1:l.startingChild,s=null===l.startingChild?l.bearing:360-q*p,u="static"===n.css("position")?"relative":n.css("position");n.css({padding:0,position:u}).addClass("roundabout-holder").data("roundabout",b.extend({},l,{startingChild:q,bearing:s,oppositeOfFocusBearing:f.normalize.apply(null,[l.focusBearing-180]),dragBearing:s,period:p})),k?n.unbind(".roundabout").children(l.childSelector).unbind(".roundabout"):l.responsive&&b(window).bind("resize",function(){f.stopAutoplay.apply(n),f.relayoutChildren.apply(n)}),l.clickToFocus&&n.children(l.childSelector).each(function(v){b(this).bind("click.roundabout",function(){var w=f.getPlacement.apply(n,[v]);if(!f.isInFocus.apply(n,[w]))return f.stopAnimation.apply(b(this)),n.data("roundabout").animating||f.animateBearingToFocus.apply(n,[w,n.data("roundabout").clickToFocusCallback]),!1})}),l.btnNext&&b(l.btnNext).bind("click.roundabout",function(){return n.data("roundabout").animating||f.animateToNextChild.apply(n,[n.data("roundabout").btnNextCallback]),!1}),l.btnPrev&&b(l.btnPrev).bind("click.roundabout",function(){return f.animateToPreviousChild.apply(n,[n.data("roundabout").btnPrevCallback]),!1}),l.btnToggleAutoplay&&b(l.btnToggleAutoplay).bind("click.roundabout",function(){return f.toggleAutoplay.apply(n),!1}),l.btnStartAutoplay&&b(l.btnStartAutoplay).bind("click.roundabout",function(){return f.startAutoplay.apply(n),!1}),l.btnStopAutoplay&&b(l.btnStopAutoplay).bind("click.roundabout",function(){return f.stopAutoplay.apply(n),!1}),l.autoplayPauseOnHover&&n.bind("mouseenter.roundabout.autoplay",function(){f.stopAutoplay.apply(n,[!0])}).bind("mouseleave.roundabout.autoplay",function(){f.startAutoplay.apply(n)}),l.enableDrag&&(b.isFunction(n.drag)?b.isFunction(n.drop)?n.drag(function(v,w){var x=n.data("roundabout"),y="x"===x.dragAxis.toLowerCase()?"deltaX":"deltaY";f.stopAnimation.apply(n),f.setBearing.apply(n,[x.dragBearing+w[y]/x.dragFactor])}).drop(function(){var w=n.data("roundabout"),x=f.getAnimateToMethod(w.dropAnimateTo);f.allowAnimation.apply(n),f[x].apply(n,[w.dropDuration,w.dropEasing,w.dropCallback]),w.dragBearing=w.period*f.getNearestChild.apply(n)}):l.debug&&alert("You do not have the drop plugin loaded."):l.debug&&alert("You do not have the drag plugin loaded."),n.each(function(){var v=b(this).get(0),w=b(this).data("roundabout"),x="x"===w.dragAxis.toLowerCase()?"pageX":"pageY",y=f.getAnimateToMethod(w.dropAnimateTo);v.addEventListener&&(v.addEventListener("touchstart",function(z){w.touchMoveStartPosition=z.touches[0][x]},!1),v.addEventListener("touchmove",function(z){var A=(z.touches[0][x]-w.touchMoveStartPosition)/w.dragFactor;z.preventDefault(),f.stopAnimation.apply(b(this)),f.setBearing.apply(b(this),[w.dragBearing+A])},!1),v.addEventListener("touchend",function(z){z.preventDefault(),f.allowAnimation.apply(b(this)),y=f.getAnimateToMethod(w.dropAnimateTo),f[y].apply(b(this),[w.dropDuration,w.dropEasing,w.dropCallback]),w.dragBearing=w.period*f.getNearestChild.apply(b(this))},!1))})),f.initChildren.apply(n,[h,k])})},initChildren:function(g,h){var k=b(this),l=k.data("roundabout");return g=g||function(){},k.children(l.childSelector).each(function(m){var n,o,p,q=f.getPlacement.apply(k,[m]);h&&b(this).data("roundabout")&&(n=b(this).data("roundabout").startWidth,o=b(this).data("roundabout").startHeight,p=b(this).data("roundabout").startFontSize),b(this).addClass("roundabout-moveable-item").css("position","absolute"),b(this).data("roundabout",{startWidth:n||b(this).width(),startHeight:o||b(this).height(),startFontSize:p||parseInt(b(this).css("font-size"),10),degrees:q,backDegrees:f.normalize.apply(null,[q-180]),childNumber:m,currentScale:1,parent:k})}),f.updateChildren.apply(k),l.autoplay&&(l.autoplayStartTimeout=setTimeout(function(){f.startAutoplay.apply(k)},l.autoplayInitialDelay)),k.trigger("ready"),g.apply(k),k},updateChildren:function(){return this.each(function(){var g=b(this),h=g.data("roundabout"),k=-1,l={bearing:h.bearing,tilt:h.tilt,stage:{width:Math.floor(0.9*b(this).width()),height:Math.floor(0.9*b(this).height())},animating:h.animating,inFocus:h.childInFocus,focusBearingRadian:f.degToRad.apply(null,[h.focusBearing]),shape:b.roundaboutShapes[h.shape]||b.roundaboutShapes[b.roundaboutShapes.def]};l.midStage={width:l.stage.width/2,height:l.stage.height/2},l.nudge={width:l.midStage.width+0.05*l.stage.width,height:l.midStage.height+0.05*l.stage.height},l.zValues={min:h.minZ,max:h.maxZ,diff:h.maxZ-h.minZ},l.opacity={min:h.minOpacity,max:h.maxOpacity,diff:h.maxOpacity-h.minOpacity},l.scale={min:h.minScale,max:h.maxScale,diff:h.maxScale-h.minScale},g.children(h.childSelector).each(function(m){f.updateChild.apply(g,[b(this),l,m,function(){b(this).trigger("ready")}])&&(!l.animating||h.lastAnimationStep)?(k=m,b(this).addClass("roundabout-in-focus")):b(this).removeClass("roundabout-in-focus")}),k!==l.inFocus&&(h.triggerBlurEvents&&g.children(h.childSelector).eq(l.inFocus).trigger("blur"),h.childInFocus=k,h.triggerFocusEvents&&-1!==k&&g.children(h.childSelector).eq(k).trigger("focus")),g.trigger("childrenUpdated")})},updateChild:function(g,h,k,l){var m,n=this,o=b(g),p=o.data("roundabout"),q=[],s=f.degToRad.apply(null,[360-p.degrees+h.bearing]);return l=l||function(){},s=f.normalizeRad.apply(null,[s]),m=h.shape(s,h.focusBearingRadian,h.tilt),m.scale=1<m.scale?1:m.scale,m.adjustedScale=(h.scale.min+h.scale.diff*m.scale).toFixed(4),m.width=(m.adjustedScale*p.startWidth).toFixed(4),m.height=(m.adjustedScale*p.startHeight).toFixed(4),o.css({left:(m.x*h.midStage.width+h.nudge.width-m.width/2).toFixed(0)+"px",top:(m.y*h.midStage.height+h.nudge.height-m.height/2).toFixed(0)+"px",width:m.width+"px",height:m.height+"px",opacity:(h.opacity.min+h.opacity.diff*m.scale).toFixed(2),zIndex:Math.round(h.zValues.min+h.zValues.diff*m.z),fontSize:(m.adjustedScale*p.startFontSize).toFixed(1)+"px"}),p.currentScale=m.adjustedScale,n.data("roundabout").debug&&(q.push("<div style=\"font-weight: normal; font-size: 10px; padding: 2px; width: "+o.css("width")+"; background-color: #ffc;\">"),q.push("<strong style=\"font-size: 12px; white-space: nowrap;\">Child "+k+"</strong><br />"),q.push("<strong>left:</strong> "+o.css("left")+"<br />"),q.push("<strong>top:</strong> "+o.css("top")+"<br />"),q.push("<strong>width:</strong> "+o.css("width")+"<br />"),q.push("<strong>opacity:</strong> "+o.css("opacity")+"<br />"),q.push("<strong>height:</strong> "+o.css("height")+"<br />"),q.push("<strong>z-index:</strong> "+o.css("z-index")+"<br />"),q.push("<strong>font-size:</strong> "+o.css("font-size")+"<br />"),q.push("<strong>scale:</strong> "+o.data("roundabout").currentScale),q.push("</div>"),o.html(q.join(""))),o.trigger("reposition"),l.apply(n),f.isInFocus.apply(n,[p.degrees])},setBearing:function(g,h){return h=h||function(){},g=f.normalize.apply(null,[g]),this.each(function(){var k,n=b(this),o=n.data("roundabout"),p=o.bearing;o.bearing=g,n.trigger("bearingSet"),f.updateChildren.apply(n),k=Math.abs(p-g),!o.animating||180<k||(k=Math.abs(p-g),n.children(o.childSelector).each(function(){var s;f.isChildBackDegreesBetween.apply(b(this),[g,p])&&(s=p>g?"Clockwise":"Counterclockwise",b(this).trigger("move"+s+"ThroughBack"))}))}),h.apply(this),this},adjustBearing:function(g,h){return(h=h||function(){},0===g)?this:(this.each(function(){f.setBearing.apply(b(this),[b(this).data("roundabout").bearing+g])}),h.apply(this),this)},setTilt:function(g,h){return h=h||function(){},this.each(function(){b(this).data("roundabout").tilt=g,f.updateChildren.apply(b(this))}),h.apply(this),this},adjustTilt:function(g,h){return h=h||function(){},this.each(function(){f.setTilt.apply(b(this),[b(this).data("roundabout").tilt+g])}),h.apply(this),this},animateToBearing:function(g,h,k,l,m){var n=new Date().getTime();return m=m||function(){},b.isFunction(l)?(m=l,l=null):b.isFunction(k)?(m=k,k=null):b.isFunction(h)&&(m=h,h=null),this.each(function(){var o,p,q,s=b(this),u=s.data("roundabout"),v=h?h:u.duration,w=k?k:u.easing||"swing";return l||(l={timerStart:n,start:u.bearing,totalTime:v}),o=n-l.timerStart,u.stopAnimation?(f.allowAnimation.apply(s),void(u.animating=!1)):void(o<v?(!u.animating&&s.trigger("animationStart"),u.animating=!0,"string"==typeof b.easing.def?(p=b.easing[w]||b.easing[b.easing.def],q=p(null,o,l.start,g-l.start,l.totalTime)):q=b.easing[w](o/l.totalTime,o,l.start,g-l.start,l.totalTime),0<=f.compareVersions.apply(null,[b().jquery,"1.7.2"])&&!b.easing.easeOutBack&&(q=l.start+(g-l.start)*q),q=f.normalize.apply(null,[q]),u.dragBearing=q,f.setBearing.apply(s,[q,function(){setTimeout(function(){f.animateToBearing.apply(s,[g,v,w,l,m])},0)}])):(u.lastAnimationStep=!0,g=f.normalize.apply(null,[g]),f.setBearing.apply(s,[g,function(){s.trigger("animationEnd")}]),u.animating=!1,u.lastAnimationStep=!1,u.dragBearing=g,m.apply(s)))}),this},animateToNearbyChild:function(g,h){var k=g[0],l=g[1],m=g[2]||function(){};return b.isFunction(l)?(m=l,l=null):b.isFunction(k)&&(m=k,k=null),this.each(function(){var n,o,p=b(this),q=p.data("roundabout"),s=q.reflect?q.bearing:q.bearing%360,u=p.children(q.childSelector).length;if(!q.animating)if(q.reflect&&"previous"===h||!q.reflect&&"next"===h){for(s=Math.abs(s)<q.floatComparisonThreshold?360:s,n=0;n<u;n+=1)if(o={lower:q.period*n,upper:q.period*(n+1)},o.upper=n===u-1?360:o.upper,s<=Math.ceil(o.upper)&&s>=Math.floor(o.lower)){2===u&&360===s?f.animateToDelta.apply(p,[-180,k,l,m]):f.animateBearingToFocus.apply(p,[o.lower,k,l,m]);break}}else for(s=Math.abs(s)<q.floatComparisonThreshold||360-Math.abs(s)<q.floatComparisonThreshold?0:s,n=u-1;0<=n;n-=1)if(o={lower:q.period*n,upper:q.period*(n+1)},o.upper=n===u-1?360:o.upper,s>=Math.floor(o.lower)&&s<Math.ceil(o.upper)){2===u&&360===s?f.animateToDelta.apply(p,[180,k,l,m]):f.animateBearingToFocus.apply(p,[o.upper,k,l,m]);break}})},animateToNearestChild:function(g,h,k){return k=k||function(){},b.isFunction(h)?(k=h,h=null):b.isFunction(g)&&(k=g,g=null),this.each(function(){var l=f.getNearestChild.apply(b(this));f.animateToChild.apply(b(this),[l,g,h,k])})},animateToChild:function(g,h,k,l){return l=l||function(){},b.isFunction(k)?(l=k,k=null):b.isFunction(h)&&(l=h,h=null),this.each(function(){var m,n=b(this),o=n.data("roundabout");o.childInFocus===g||o.animating||(m=n.children(o.childSelector).eq(g),f.animateBearingToFocus.apply(n,[m.data("roundabout").degrees,h,k,l]))})},animateToNextChild:function(){return f.animateToNearbyChild.apply(this,[arguments,"next"])},animateToPreviousChild:function(){return f.animateToNearbyChild.apply(this,[arguments,"previous"])},animateToDelta:function(g,h,k,l){return l=l||function(){},b.isFunction(k)?(l=k,k=null):b.isFunction(h)&&(l=h,h=null),this.each(function(){var m=b(this).data("roundabout").bearing+g;f.animateToBearing.apply(b(this),[m,h,k,l])})},animateBearingToFocus:function(g,h,k,l){return l=l||function(){},b.isFunction(k)?(l=k,k=null):b.isFunction(h)&&(l=h,h=null),this.each(function(){var m=b(this).data("roundabout").bearing-g;m=Math.abs(360-m)<Math.abs(m)?360-m:-m,m=180<m?-(360-m):m,0!=m&&f.animateToDelta.apply(b(this),[m,h,k,l])})},stopAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=!0})},allowAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=!1})},startAutoplay:function(g){return this.each(function(){var h=b(this),k=h.data("roundabout");g=g||k.autoplayCallback||function(){},clearInterval(k.autoplayInterval),k.autoplayInterval=setInterval(function(){f.animateToNextChild.apply(h,[g])},k.autoplayDuration),k.autoplayIsRunning=!0,h.trigger("autoplayStart")})},stopAutoplay:function(g){return this.each(function(){clearInterval(b(this).data("roundabout").autoplayInterval),b(this).data("roundabout").autoplayInterval=null,b(this).data("roundabout").autoplayIsRunning=!1,g||b(this).unbind(".autoplay"),b(this).trigger("autoplayStop")})},toggleAutoplay:function(g){return this.each(function(){var h=b(this),k=h.data("roundabout");g=g||k.autoplayCallback||function(){},f.isAutoplaying.apply(b(this))?f.stopAutoplay.apply(b(this),[g]):f.startAutoplay.apply(b(this),[g])})},isAutoplaying:function(){return this.data("roundabout").autoplayIsRunning},changeAutoplayDuration:function(g){return this.each(function(){var h=b(this),k=h.data("roundabout");k.autoplayDuration=g,f.isAutoplaying.apply(h)&&(f.stopAutoplay.apply(h),setTimeout(function(){f.startAutoplay.apply(h)},10))})},normalize:function(g){var h=g%360;return 0>h?360+h:h},normalizeRad:function(g){for(;0>g;)g+=2*Math.PI;for(;g>2*Math.PI;)g-=2*Math.PI;return g},isChildBackDegreesBetween:function(g,h){var k=b(this).data("roundabout").backDegrees;return g>h?k>=h&&k<g:k<h&&k>=g},getAnimateToMethod:function(g){return(g=g.toLowerCase(),"next"===g)?"animateToNextChild":"previous"===g?"animateToPreviousChild":"animateToNearestChild"},relayoutChildren:function(){return this.each(function(){var g=b(this),h=b.extend({},g.data("roundabout"));h.startingChild=g.data("roundabout").childInFocus,f.init.apply(g,[h,null,!0])})},getNearestChild:function(){var g=b(this),h=g.data("roundabout"),k=g.children(h.childSelector).length;return h.reflect?Math.round(h.bearing/h.period)%k:(k-Math.round(h.bearing/h.period)%k)%k},degToRad:function(g){return f.normalize.apply(null,[g])*Math.PI/180},getPlacement:function(g){var h=this.data("roundabout");return h.reflect?h.period*g:360-h.period*g},isInFocus:function(g){var h,k=this,l=k.data("roundabout"),m=f.normalize.apply(null,[l.bearing]);return g=f.normalize.apply(null,[g]),h=Math.abs(m-g),h<=l.floatComparisonThreshold||h>=360-l.floatComparisonThreshold},getChildInFocus:function(){var g=b(this).data("roundabout");return!!(-1<g.childInFocus)&&g.childInFocus},compareVersions:function(g,h){var k,l=g.split(/\./i),m=h.split(/\./i),n=l.length>m.length?l.length:m.length;for(k=0;k<=n;k++){if(l[k]&&!m[k]&&0!==parseInt(l[k],10))return 1;if(m[k]&&!l[k]&&0!==parseInt(m[k],10))return-1;if(l[k]!==m[k]&&l[k]&&m[k])return parseInt(l[k],10)>parseInt(m[k],10)?1:-1}return 0}},b.fn.roundabout=function(g){if(f[g])return f[g].apply(this,Array.prototype.slice.call(arguments,1));return"object"==typeof g||b.isFunction(g)||!g?f.init.apply(this,arguments):void b.error("Method "+g+" does not exist for jQuery.roundabout.")}})(jQuery);